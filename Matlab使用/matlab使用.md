## 1.基本介绍

注：本文所使用的matlab版本为2021a

## 2.Matlab 科学计算

### 快捷键

退出程序 ：`Ctrl+Q`

重新调用以前的命令： 方向键`↑` 和 `↓` 



### 语句

```matlab
>> name = 'aaa'
name =
aaa

>> name = 'aaa';
```

​		上面的语句1和2是等效的。都是给变量赋值为 `aaa`。但是语句1执行后，下面显示了结果；语句2执行后，却什么也没显示。这是因为如果语句后面不加分号，matlab会以交互式来执行程序，所以每执行一步，都会输出。而有分号后matlab会执行这个语句，并且会继续执行。除非我们打印结果，否则不会将其显示到屏幕上。


### 变量

#### 添加变量

//todo 基本数据类型

```matlab
>> num1 = 40;
>> num2 = 60;
>> sum = num1 + num2;
>> sum

sum =

   100
```

#### 删除变量

​		使用`clear + 变量 `指令，我们可以指定删除已经存在的变量；如果直接使用 `clear`指令 ，那么所有的变量将会全部删除。操作如下：

```matlab
>> num1 = 20;
>> num2 = 30;
>> clear num1;
>> num1
函数或变量 'num1' 无法识别。

>> clear
>> num2
函数或变量 'num2' 无法识别。
```

#### 查看变量

​		`who`命令可以列出变量的名字；`whos`命令显示的信息更加的全面，包括数据的大小、类型、占了多少空间等。操作如下：

```matlab
>> num1 = 40;
>> num2 = 60;
>> sum = num1 + num2;
>> who

您的变量为:

num1  num2  sum   

>> whos
  Name      Size            Bytes  Class     Attributes

  num1      1x1                 8  double              
  num2      1x1                 8  double              
  sum       1x1                 8  double     
```



### 数组与矩阵

#### 创建矩阵

​		使用中括号`[]`与空格键或逗号进行创建：

```matlab
>> a = [1 2 3 4];
>> a

a =

     1     2     3     4

>> b = [1 0 0 ; 0 1 0 ; 0 0 1]

b =

     1     0     0
     0     1     0
     0     0     1
```

​		对于多行数组（矩阵），通过分号进行之间的分割。

​		可以使用`diag()`进行对角阵的创建。例如：

```matlab
>> a = [1 2 3 4];		%先创建一个包含对角线元素的向量
>> b = diag(a)

b =

     1     0     0     0
     0     2     0     0
     0     0     3     0
     0     0     0     4
```



#### 元素访问

​		访问矩阵中的某些元素，可以通过下标的方式进行。格式为**<矩阵名>（<行访问方式> , <列访问方式>）**。例如：

```matlab
>> a = [1 2 3 4 5 6; 9 8 7 6 5 4];
>> b = a(1,2)

b =

     2

>> c = a(3,6)
位置 1 处的索引超出数组边界(不能超出 2)。

>> d = a(:,[2 4])		% 行访问不做要求（全都访问），列访问下标为 2 和 4 的列。

d =

     2     4
     8     6
```

​		注意到matlab的下标是从1开始的，且访问时不能越界。



#### 矩阵计算

**整体计算**：直接对矩阵进行相应计算即可，与变量相同。

**矩阵转置**：使用`'`键。

**矩阵求逆**：使用`inv( )`函数

**矩阵乘法**：使用`*`运算符。其他代数运算同理

**元素乘法**：使用`.*`运算符。其他代数运算同理

**矩阵除法**：使用`/`和`\`运算符。这里有左除和右除的区别，可以认为：

​																			A / B = A * inv(B)			A \ B = inv(A) * B

相关操作如下：

```matlab
>> a = [1 1 1; 0 1 0; 1 0 0];
>> a = a * 2;
>> a

a =

     2     2     2
     0     2     0
     2     0     0

>> b = sin(a)

b =

    0.9093    0.9093    0.9093
         0    0.9093         0
    0.9093         0         0

>> c = a'

c =

     2     0     2
     2     2     0
     2     0     0
     
>> d = inv(a)

d =

         0         0    0.5000
         0    0.5000         0
    0.5000   -0.5000   -0.5000
    
>> e = a * d

e =

     1     0     0
     0     1     0
     0     0     1
     
>> f = c .* d

f =

     0     0     1
     0     1     0
     1     0     0
```



#### 矩阵计算的函数

常用的矩阵计算相关函数如下图所示：

![image-20220310214235715](D:\mygit\Matlab使用\pictures\m_fun3.png)



#### 矩阵连接

​		通过类似矩阵构建的方式实现多个矩阵之间的连接。操作如下：

```matlab
>> a = [1 2 3 ; 4 5 6];
>> b = [7 8 9 ; 0 0 0];
>> c = [a b]		%水平连接

c =

     1     2     3     7     8     9
     4     5     6     0     0     0

>> d = [a ; b]		%竖直连接

d =

     1     2     3
     4     5     6
     7     8     9
     0     0     0
```

注意：矩阵连接时需要满足基本的行列对应关系，否则会报错。



### 数学计算函数

matlab中常用的函数如下图所示

![image-20220310214010716](D:\mygit\Matlab使用\pictures\matlab_function.png)

部分特殊数学函数如下图所示：

![image-20220310214138366](D:\mygit\Matlab使用\pictures\m_fuc2.png)











### 清除屏幕内容

​		使用`clc`指令，可以清除当前命令行内所有内容，但不会清除已经存在的变量。





## 3.Matlab 程序设计

Matlab不仅仅是一个高效计算软件，其本身也提供了编程功能，从而让科学计算变的更加自然、可维护。

### M文件

​		用 MATLAB 语言编写的程序称为 M 文件。M 文件有两类：命令文件和函数文件。两者区别在于命令文件没有输入参数也不返回输出参数，而函数文件可以输入参数也可以返回输出参数。命令文件对 MATLAB 工作空间中的变量进行操作，而函数文件中定义的变量为局部变量，当函数文件执行完毕时，这些变量就会被清除。

#### 新建与保存



#### 命令文件

​		当用户要运行的命令较多或需要反复运行多条命令时，直接从键盘逐行输入命令显得比较麻烦，而命令文件则可以较好地解决这一问题。我们可以将需运行的命令编辑到一个文件中，然后在 MATLAB 命令窗口输入该命令文件的名字就会顺序执行命令文件中的命令。例如：

```c++
test.m的内容：

a = [0 1 2];
b = [3; 4; 5];
c = a * b
```

```matlab
>> test

c =

    14
```



### 数据I/O

#### 数据输入

Matlab 的输入输出方式包括命令窗口的输入输出以及图形界面的输入输出。此外，它还允许对文件进行读写操作。

**Input 函数**

语法：**<变量> = input('提示信息', 选项);**

支持输入的内容包括数字、字符串、数组等。例如：

```matlab
>> A = input('Enter the matrix A:');
Enter the matrix A:[0 2 3 4; 5 6 7 8]
>> A

A =

     0     2     3     4
     5     6     7     8
     
>> str = input('What''s your name?','s')
What's your name?Bob

str =

    'Bob'
```

注：`''`可以用来在提示信息中输出`'`。



**Pause 函数**

语法： **pause(延迟秒数);**

注：如果不输入时间，则为暂停程序，直至用户按下任意键。



#### 数据输出

**Disp 函数**

//todo





### 分支结构

#### 逻辑运算

Matlab常见的逻辑运算符有：

`<`		`<=`		`>`		`>=`		`==`		`~=`		`&`（逻辑与）	`|`（逻辑或）	`~`（逻辑非）

注意，上述的各个运算元须用在二个大小相同的阵列或是矩阵的比较中。例如：

```matlab
>> a = [0:5];
>> b = 5 - a;
>> c = (a == b)

c =

  1×6 logical 数组

   0   0   0   0   0   0

>> d = (a < b)

d =

  1×6 logical 数组

   1   1   1   0   0   0

>> e = (a & b)

e =

  1×6 logical 数组

   0   1   1   1   1   0
```

除了上述的逻辑运算符之外，Matlab还有如下的逻辑运算函数：

​		`xor(x,y)`		`any(x)`		`all(x)`		 `isnan(x)`		 `isinf(x)`		 `finite(x)`		 `find(x)`

例如： xor( )函数会判断元素是否都为零或非零，并返回相应的逻辑判断结果





#### 选择语句

语法结构与主流编程语言类似。注意到 Matlab 不需要缩进和括号，其语法段的判断和 Verilog 很像，通过 end 语句进行区分。

**if 语句**

Matlab中的 if 语句有如下的格式：

```matlab
if <条件>
	语句组
elseif <条件>
	语句组
else
	语句组
end
% 可以不缩进，但是不美观.jpg
```

例如，以下是求三角形面积的程序：

```matlab
A = input('请输入三边长:');
if (A(1)+A(2)>A(3) & A(1)+A(3)>A(2) & A(2)+A(3)>A(1))
 	p=(A(1)+A(2)+A(3))/2;
	s = sqrt(p*(p-A(1))*(p-A(2))*(p-A(3)));
	disp(s);
else
 	disp('无法构成三角形!')
end
```

交互过程如下所示：

```
请输入三边长:[3 4 5]
     6
```



**switch 语句**

Matlab中的 switch 语句有如下的格式：

```matlab
switch <表达式>
	case 值1
		语句组1
	case 值2
		语句组2
	......
	otherwize
		语句组
end
```



### 循环结构